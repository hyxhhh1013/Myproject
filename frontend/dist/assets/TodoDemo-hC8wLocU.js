import{c as O,r as D,j as e,e as P}from"./index-BhbzFmRm.js";import{u as z,a as I,D as K,c as R,S as C,b as _,d as $,e as p,s as B,K as G,P as M,f as T,v as q,C as F}from"./sortable.esm-fTnJ7vvU.js";import{A as H}from"./arrow-left-4i2vtRcM.js";import{P as J}from"./plus-D12x7VOR.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],U=O("ellipsis",Q),A=t=>{switch(t){case"todo":return"待办";case"in-progress":return"进行中";case"done":return"已完成";default:return t}},V=({id:t,task:r})=>{const{attributes:c,listeners:o,setNodeRef:x,transform:g,transition:u,isDragging:m}=T({id:t,data:{type:"Task",task:r}}),f={transform:F.Transform.toString(g),transition:u,opacity:m?.3:1};return e.jsxs("div",{ref:x,style:f,...c,...o,className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 mb-3 group hover:shadow-md transition-all cursor-grab active:cursor-grabbing",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-gray-700 dark:text-gray-200 font-medium text-sm leading-relaxed",children:r.content}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:e.jsx(U,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"mt-3 flex items-center justify-between",children:[e.jsx("span",{className:`text-[10px] font-bold px-2 py-1 rounded-full uppercase tracking-wider ${r.status==="todo"?"bg-gray-100 text-gray-500":r.status==="in-progress"?"bg-blue-100 text-blue-600":"bg-green-100 text-green-600"}`,children:A(r.status)}),e.jsx("div",{className:"w-6 h-6 rounded-full bg-gray-100 dark:bg-gray-700 flex items-center justify-center text-xs font-bold text-gray-500",children:r.content.charAt(0)})]})]})},v=({status:t,tasks:r})=>{const{setNodeRef:c}=T({id:t,data:{type:"Column",status:t}});return e.jsxs("div",{className:"flex flex-col h-full bg-gray-50 dark:bg-gray-900/50 rounded-2xl p-4 min-w-[280px] w-80 border border-gray-200 dark:border-gray-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4 px-2",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-200 capitalize flex items-center gap-2",children:[e.jsx("div",{className:`w-2 h-2 rounded-full ${t==="todo"?"bg-gray-400":t==="in-progress"?"bg-blue-500":"bg-green-500"}`}),A(t),e.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-gray-500 text-xs px-2 py-0.5 rounded-full ml-2",children:r.length})]}),e.jsx("button",{className:"text-gray-400 hover:text-gray-600",children:e.jsx(J,{className:"w-4 h-4"})})]}),e.jsx("div",{ref:c,className:"flex-1 overflow-y-auto custom-scrollbar",children:e.jsx(C,{items:r.map(o=>o.id),strategy:q,children:r.map(o=>e.jsx(V,{id:o.id,task:o},o.id))})})]})},ee=()=>{var j;const[t,r]=D.useState([{id:"1",content:"竞品调研分析",status:"todo"},{id:"2",content:"设计系统初稿",status:"todo"},{id:"3",content:"客户会议准备",status:"in-progress"},{id:"4",content:"修复导航栏 Bug",status:"in-progress"},{id:"5",content:"发布 v1.0.0 版本",status:"done"}]),[c,o]=D.useState(null),x=z(I(M,{activationConstraint:{distance:5}}),I(G,{coordinateGetter:B})),g=s=>{o(s.active.id)},u=s=>{var N,S,k;const{active:w,over:l}=s;if(!l)return;const y=w.id,b=l.id;if(y===b)return;const h=((N=w.data.current)==null?void 0:N.type)==="Task",E=((S=l.data.current)==null?void 0:S.type)==="Task",L=((k=l.data.current)==null?void 0:k.type)==="Column";h&&(h&&E&&r(a=>{const i=a.findIndex(n=>n.id===y),d=a.findIndex(n=>n.id===b);if(a[i].status!==a[d].status){const n=[...a];return n[i].status=a[d].status,p(n,i,d-1>=0?d-1:d)}return p(a,i,d)}),h&&L&&r(a=>{const i=a.findIndex(n=>n.id===y),d=b;if(a[i].status!==d){const n=[...a];return n[i].status=d,p(n,i,i)}return a}))},m=()=>{o(null)},f={sideEffects:$({styles:{active:{opacity:"0.5"}}})};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 p-8 pt-24 overflow-x-auto",children:[e.jsx(P,{to:"/",className:"fixed top-6 left-6 z-50 p-2 bg-white dark:bg-gray-800 rounded-full shadow-md text-gray-500 hover:text-gray-800 dark:text-gray-400 dark:hover:text-white transition-colors",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-white mb-2",children:"项目看板"}),e.jsx("p",{className:"text-gray-500",children:"使用看板视图高效管理您的任务"})]}),e.jsxs(K,{sensors:x,collisionDetection:R,onDragStart:g,onDragOver:u,onDragEnd:m,children:[e.jsx("div",{className:"flex gap-8 h-[calc(100vh-200px)] min-w-fit pb-4",children:e.jsxs(C,{items:t.map(s=>s.id),children:[" ",e.jsx(v,{status:"todo",tasks:t.filter(s=>s.status==="todo")}),e.jsx(v,{status:"in-progress",tasks:t.filter(s=>s.status==="in-progress")}),e.jsx(v,{status:"done",tasks:t.filter(s=>s.status==="done")})]})}),e.jsx(_,{dropAnimation:f,children:c?e.jsx("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-2xl border-2 border-blue-500 w-full cursor-grabbing rotate-3",children:e.jsx("p",{className:"text-gray-800 dark:text-white font-medium",children:(j=t.find(s=>s.id===c))==null?void 0:j.content})}):null})]})]})};export{ee as default};
