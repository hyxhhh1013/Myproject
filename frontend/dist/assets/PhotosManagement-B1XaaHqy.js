import{r as c,a as ie,d as C,j as e}from"./index-BhbzFmRm.js";import{D as De,g as Le,S as Te,v as Ve,f as qe,C as He}from"./sortable.esm-fTnJ7vvU.js";import{u as we,a as Oe,W as Ue,F as g,S as G,B as S,C as ce,I as O,R as We,b as _e,c as Ae,d as oe,e as be,f as ae,T as Be}from"./index-kBbHJYa7.js";import{K as ye,g as Xe,m as Ge,a as Ke,u as V,r as Qe,F as Je,b as Ye,D as Ze,c as et,R as tt,s as u}from"./index-CEnH4XFE.js";import{R as Se}from"./UploadOutlined-Cvxgmm1P.js";import{S as L,P as de,F as nt,E as at,M as J}from"./Table-B3Aa-BfP.js";import{R as it}from"./DownloadOutlined-DWBHGFBM.js";import{R as st,a as rt,b as lt,I as Ie}from"./index-DfiKCF8p.js";import{R as he}from"./EditOutlined-Bwl5_b2f.js";import{T as me}from"./index-ealqDkwN.js";import{U as ue}from"./index-bMoq39ES.js";import{L as ge}from"./index-DGiGROfW.js";import"./index-DcAOwtUU.js";function xe(){return xe=Object.assign?Object.assign.bind():function(n){for(var a=1;a<arguments.length;a++){var l=arguments[a];for(var o in l)Object.prototype.hasOwnProperty.call(l,o)&&(n[o]=l[o])}return n},xe.apply(this,arguments)}const $e=c.forwardRef(({prefixCls:n="rc-switch",className:a,checked:l,defaultChecked:o,disabled:p,loadingIcon:m,checkedChildren:x,unCheckedChildren:r,onClick:s,onChange:d,onKeyDown:f,styles:j,classNames:M,...P},K)=>{const[N,Q]=we(o??!1,l);function R(y,I){let F=N;return p||(F=y,Q(F),d==null||d(F,I)),F}function q(y){y.which===ye.LEFT?R(!1,y):y.which===ye.RIGHT&&R(!0,y),f==null||f(y)}function E(y){const I=R(!N,y);s==null||s(I,y)}const H=ie(n,a,{[`${n}-checked`]:N,[`${n}-disabled`]:p});return c.createElement("button",xe({},P,{type:"button",role:"switch","aria-checked":N,disabled:p,className:H,ref:K,onKeyDown:q,onClick:E}),m,c.createElement("span",{className:`${n}-inner`},c.createElement("span",{className:ie(`${n}-inner-checked`,M==null?void 0:M.content),style:j==null?void 0:j.content},x),c.createElement("span",{className:ie(`${n}-inner-unchecked`,M==null?void 0:M.content),style:j==null?void 0:j.content},r)))});$e.displayName="Switch";const ct=n=>{const{componentCls:a,trackHeightSM:l,trackPadding:o,trackMinWidthSM:p,innerMinMarginSM:m,innerMaxMarginSM:x,handleSizeSM:r,calc:s}=n,d=`${a}-inner`,f=V(s(r).add(s(o).mul(2)).equal()),j=V(s(x).mul(2).equal());return{[a]:{[`&${a}-small`]:{minWidth:p,height:l,lineHeight:V(l),[`${a}-inner`]:{paddingInlineStart:x,paddingInlineEnd:m,[`${d}-checked, ${d}-unchecked`]:{minHeight:l},[`${d}-checked`]:{marginInlineStart:`calc(-100% + ${f} - ${j})`,marginInlineEnd:`calc(100% - ${f} + ${j})`},[`${d}-unchecked`]:{marginTop:s(l).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`${a}-handle`]:{width:r,height:r},[`${a}-loading-icon`]:{top:s(s(r).sub(n.switchLoadingIconSize)).div(2).equal(),fontSize:n.switchLoadingIconSize},[`&${a}-checked`]:{[`${a}-inner`]:{paddingInlineStart:m,paddingInlineEnd:x,[`${d}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${d}-unchecked`]:{marginInlineStart:`calc(100% - ${f} + ${j})`,marginInlineEnd:`calc(-100% + ${f} - ${j})`}},[`${a}-handle`]:{insetInlineStart:`calc(100% - ${V(s(r).add(o).equal())})`}},[`&:not(${a}-disabled):active`]:{[`&:not(${a}-checked) ${d}`]:{[`${d}-unchecked`]:{marginInlineStart:s(n.marginXXS).div(2).equal(),marginInlineEnd:s(n.marginXXS).mul(-1).div(2).equal()}},[`&${a}-checked ${d}`]:{[`${d}-checked`]:{marginInlineStart:s(n.marginXXS).mul(-1).div(2).equal(),marginInlineEnd:s(n.marginXXS).div(2).equal()}}}}}}},ot=n=>{const{componentCls:a,handleSize:l,calc:o}=n;return{[a]:{[`${a}-loading-icon${n.iconCls}`]:{position:"relative",top:o(o(l).sub(n.fontSize)).div(2).equal(),color:n.switchLoadingIconColor,verticalAlign:"top"},[`&${a}-checked ${a}-loading-icon`]:{color:n.switchColor}}}},dt=n=>{const{componentCls:a,trackPadding:l,handleBg:o,handleShadow:p,handleSize:m,calc:x}=n,r=`${a}-handle`;return{[a]:{[r]:{position:"absolute",top:l,insetInlineStart:l,width:m,height:m,transition:`all ${n.switchDuration} ease-in-out`,"&::before":{position:"absolute",top:0,insetInlineEnd:0,bottom:0,insetInlineStart:0,backgroundColor:o,borderRadius:x(m).div(2).equal(),boxShadow:p,transition:`all ${n.switchDuration} ease-in-out`,content:'""'}},[`&${a}-checked ${r}`]:{insetInlineStart:`calc(100% - ${V(x(m).add(l).equal())})`},[`&:not(${a}-disabled):active`]:{[`${r}::before`]:{insetInlineEnd:n.switchHandleActiveInset,insetInlineStart:0},[`&${a}-checked ${r}::before`]:{insetInlineEnd:0,insetInlineStart:n.switchHandleActiveInset}}}}},ht=n=>{const{componentCls:a,trackHeight:l,trackPadding:o,innerMinMargin:p,innerMaxMargin:m,handleSize:x,calc:r}=n,s=`${a}-inner`,d=V(r(x).add(r(o).mul(2)).equal()),f=V(r(m).mul(2).equal());return{[a]:{[s]:{display:"block",overflow:"hidden",borderRadius:100,height:"100%",paddingInlineStart:m,paddingInlineEnd:p,transition:`padding-inline-start ${n.switchDuration} ease-in-out, padding-inline-end ${n.switchDuration} ease-in-out`,[`${s}-checked, ${s}-unchecked`]:{display:"block",color:n.colorTextLightSolid,fontSize:n.fontSizeSM,transition:`margin-inline-start ${n.switchDuration} ease-in-out, margin-inline-end ${n.switchDuration} ease-in-out`,pointerEvents:"none",minHeight:l},[`${s}-checked`]:{marginInlineStart:`calc(-100% + ${d} - ${f})`,marginInlineEnd:`calc(100% - ${d} + ${f})`},[`${s}-unchecked`]:{marginTop:r(l).mul(-1).equal(),marginInlineStart:0,marginInlineEnd:0}},[`&${a}-checked ${s}`]:{paddingInlineStart:p,paddingInlineEnd:m,[`${s}-checked`]:{marginInlineStart:0,marginInlineEnd:0},[`${s}-unchecked`]:{marginInlineStart:`calc(100% - ${d} + ${f})`,marginInlineEnd:`calc(-100% + ${d} - ${f})`}},[`&:not(${a}-disabled):active`]:{[`&:not(${a}-checked) ${s}`]:{[`${s}-unchecked`]:{marginInlineStart:r(o).mul(2).equal(),marginInlineEnd:r(o).mul(-1).mul(2).equal()}},[`&${a}-checked ${s}`]:{[`${s}-checked`]:{marginInlineStart:r(o).mul(-1).mul(2).equal(),marginInlineEnd:r(o).mul(2).equal()}}}}}},mt=n=>{const{componentCls:a,trackHeight:l,trackMinWidth:o}=n;return{[a]:{...Qe(n),position:"relative",display:"inline-block",boxSizing:"border-box",minWidth:o,height:l,lineHeight:V(l),verticalAlign:"middle",background:n.colorTextQuaternary,border:"0",borderRadius:100,cursor:"pointer",transition:`all ${n.motionDurationMid}`,userSelect:"none",[`&:hover:not(${a}-disabled)`]:{background:n.colorTextTertiary},...Ke(n),[`&${a}-checked`]:{background:n.switchColor,[`&:hover:not(${a}-disabled)`]:{background:n.colorPrimaryHover}},[`&${a}-loading, &${a}-disabled`]:{cursor:"not-allowed",opacity:n.switchDisabledOpacity,"*":{boxShadow:"none",cursor:"not-allowed"}},[`&${a}-rtl`]:{direction:"rtl"}}}},ut=n=>{const{fontSize:a,lineHeight:l,controlHeight:o,colorWhite:p}=n,m=a*l,x=o/2,r=2,s=m-r*2,d=x-r*2;return{trackHeight:m,trackHeightSM:x,trackMinWidth:s*2+r*4,trackMinWidthSM:d*2+r*2,trackPadding:r,handleBg:p,handleSize:s,handleSizeSM:d,handleShadow:`0 2px 4px 0 ${new Je("#00230b").setA(.2).toRgbString()}`,innerMinMargin:s/2,innerMaxMargin:s+r+r*2,innerMinMarginSM:d/2,innerMaxMarginSM:d+r+r*2}},gt=Xe("Switch",n=>{const a=Ge(n,{switchDuration:n.motionDurationMid,switchColor:n.colorPrimary,switchDisabledOpacity:n.opacityLoading,switchLoadingIconSize:n.calc(n.fontSizeIcon).mul(.75).equal(),switchLoadingIconColor:`rgba(0, 0, 0, ${n.opacityLoading})`,switchHandleActiveInset:"-30%"});return[mt(a),ht(a),dt(a),ot(a),ct(a)]},ut),xt=c.forwardRef((n,a)=>{const{prefixCls:l,size:o,disabled:p,loading:m,className:x,rootClassName:r,style:s,checked:d,value:f,defaultChecked:j,defaultValue:M,onChange:P,styles:K,classNames:N,...Q}=n,[R,q]=we(j??M??!1,d??f),{getPrefixCls:E,direction:H,className:y,style:I,classNames:F,styles:se}=Ye("switch"),Y=c.useContext(Ze),U=(p??Y)||m,z=E("switch",l),W=c.createElement("div",{className:`${z}-handle`},m&&c.createElement(tt,{className:`${z}-loading-icon`})),[_,k]=gt(z),A=Oe(o),Z={...n,size:A,disabled:U},[ee,B]=et([F,N],[se,K],{props:Z}),te=ie(y,{[`${z}-small`]:A==="small",[`${z}-loading`]:m,[`${z}-rtl`]:H==="rtl"},x,r,ee.root,_,k),w={...B.root,...I,...s},re=(...ne)=>{q(ne[0]),P==null||P(...ne)};return c.createElement(Ue,{component:"Switch",disabled:U},c.createElement($e,{...Q,classNames:ee,styles:B,checked:R,onChange:re,prefixCls:z,className:te,style:w,disabled:U,ref:a,loadingIcon:W}))}),T=xt;T.__ANT_SWITCH=!0;const pt=({children:n,...a})=>{const{attributes:l,listeners:o,setNodeRef:p,transform:m,transition:x,isDragging:r}=qe({id:a["data-row-key"]}),s={...a.style,transform:He.Transform.toString(m&&{...m,scaleY:1}),transition:x,cursor:"move",...r?{position:"relative",zIndex:9999}:{}};return e.jsx("tr",{...a,ref:p,style:s,...l,...o,children:n})},Et=()=>{const[n,a]=c.useState([]),[l,o]=c.useState([]),[p,m]=c.useState(!0),[x,r]=c.useState(null),[s,d]=c.useState(""),[f,j]=c.useState(!1),[M,P]=c.useState(!1),[K,N]=c.useState(!1),[Q,R]=c.useState(!1),[q]=g.useForm(),[E]=g.useForm(),[H]=g.useForm(),[y]=g.useForm(),[I,F]=c.useState([]),[se,Y]=c.useState(!1),[U,z]=c.useState(null),[W,_]=c.useState(null),[k,A]=c.useState([]),[Z,ee]=c.useState(window.innerWidth<768),[B,te]=c.useState("table");c.useEffect(()=>{const t=()=>{const i=window.innerWidth<768;ee(i),i&&te("grid")};return window.addEventListener("resize",t),t(),()=>window.removeEventListener("resize",t)},[]);const w=c.useCallback(async()=>{try{m(!0);const[t,i]=await Promise.all([C.get("/photo-categories"),C.get("/photos?limit=100")]);o(t.data),a(i.data.photos)}catch(t){console.error("Failed to fetch data:",t),u.error("加载数据失败")}finally{m(!1)}},[]);c.useEffect(()=>{w()},[w]);const re=async()=>{var t,i;try{const h=await q.validateFields();if(I.length===0){u.warning("请至少选择一张图片");return}Y(!0);const b=new FormData;I.forEach(v=>{v.originFileObj&&b.append("images",v.originFileObj)}),b.append("categoryId",h.categoryId),b.append("isFeatured",h.isFeatured?"true":"false"),b.append("isVisible",h.isVisible?"true":"false"),b.append("title",h.title||""),b.append("description",h.description||"");const $=await C.post("/photos/bulk",b,{headers:{"Content-Type":"multipart/form-data"}});u.success(`成功上传 ${$.data.photos.length} 张照片`),j(!1),q.resetFields(),F([]),w()}catch(h){console.error("Upload failed:",h),u.error(((i=(t=h.response)==null?void 0:t.data)==null?void 0:i.message)||"上传失败")}finally{Y(!1)}},ne={onRemove:t=>{const i=I.indexOf(t),h=I.slice();h.splice(i,1),F(h)},beforeUpload:t=>t.type.startsWith("image/")?t.size/1024/1024<10?(F([...I,t]),!1):(u.error("图片大小不能超过 10MB"),ue.LIST_IGNORE):(u.error(`${t.name} 不是图片文件`),ue.LIST_IGNORE),fileList:I,multiple:!0,listType:"picture"},ve=async()=>{try{const t=await E.validateFields();W?(await C.put(`/photo-categories/${W.id}`,t),u.success("分类更新成功")):(await C.post("/photo-categories",t),u.success("分类创建成功")),_(null),E.resetFields(),w()}catch(t){console.error("Save category failed:",t),u.error("保存分类失败")}},Ce=async t=>{try{await C.delete(`/photo-categories/${t}`),u.success("分类删除成功"),w()}catch{u.error("删除分类失败，可能该分类下还有照片")}},pe=async t=>{try{await C.delete(`/photos/${t}`),u.success("删除成功"),w()}catch{u.error("删除失败")}},ke=async()=>{k.length!==0&&J.confirm({title:"确认批量删除",content:`确定要删除选中的 ${k.length} 个作品吗？此操作不可恢复。`,okText:"删除",okType:"danger",cancelText:"取消",onOk:async()=>{try{await C.post("/photos/bulk/delete",{ids:k}),await C.post("/photos/bulk-delete",{ids:k}),u.success(`成功删除 ${k.length} 个作品`),A([]),w()}catch{u.error("批量删除失败")}}})},Me=()=>{if(X.length===0){u.warning("没有数据可导出");return}try{const i=[["ID","标题","描述","分类","链接","创建时间"].join(","),...X.map(v=>[v.id,`"${(v.title||"").replace(/"/g,'""')}"`,`"${(v.description||"").replace(/"/g,'""')}"`,`"${(v.category.name||"").replace(/"/g,'""')}"`,v.imageUrl,v.createdAt].join(","))].join(`
`),h=new Blob([i],{type:"text/csv;charset=utf-8;"}),b=URL.createObjectURL(h),$=document.createElement("a");$.href=b,$.setAttribute("download",`photos_export_${new Date().toISOString().slice(0,10)}.csv`),document.body.appendChild($),$.click(),document.body.removeChild($)}catch(t){u.error("导出失败"),console.error(t)}},Ne=async()=>{try{const t=await y.validateFields();await C.post("/photos/batch/category",{ids:k,categoryId:t.categoryId}),u.success(`成功更新 ${k.length} 个作品的分类`),R(!1),y.resetFields(),A([]),w()}catch{u.error("批量分类失败")}},le=async(t,i,h)=>{try{await C.put(`/photos/${t}`,{[i]:h}),u.success("状态更新成功"),a(b=>b.map($=>$.id===t?{...$,[i]:h}:$))}catch{u.error("状态更新失败"),w()}},je=t=>{z(t),H.setFieldsValue({title:t.title,description:t.description,categoryId:t.category.id,isFeatured:t.isFeatured,isVisible:t.isVisible}),N(!0)},Ee=async()=>{if(U)try{const t=await H.validateFields();await C.put(`/photos/${U.id}`,t),u.success("更新成功"),N(!1),z(null),w()}catch{u.error("更新失败")}},Fe=async({active:t,over:i})=>{t.id!==(i==null?void 0:i.id)&&a(h=>{const b=h.findIndex(D=>D.id===t.id),$=h.findIndex(D=>D.id===(i==null?void 0:i.id)),v=[...h],[Re]=v.splice(b,1);v.splice($,0,Re);const fe=v.map((D,Pe)=>({...D,orderIndex:Pe}));return C.put("/photos/order/update",{photos:fe.map(D=>({id:D.id,orderIndex:D.orderIndex}))}).catch(()=>{u.error("排序保存失败"),w()}),fe})},X=n.filter(t=>{var b;const i=x?t.category.id===x:!0,h=s?t.title.toLowerCase().includes(s.toLowerCase())||((b=t.description)==null?void 0:b.toLowerCase().includes(s.toLowerCase())):!0;return i&&h}),ze=[{title:"排序",key:"sort",width:50,render:()=>e.jsx(lt,{className:"cursor-grab text-gray-400"})},{title:"缩略图",dataIndex:"thumbnailUrl",key:"thumbnailUrl",width:100,render:(t,i)=>e.jsx(Ie.PreviewGroup,{children:e.jsx(Ie,{src:i.thumbnailUrl,width:80,height:60,style:{objectFit:"cover",borderRadius:4},preview:{src:i.imageUrl}})})},{title:"标题/描述",dataIndex:"title",key:"title",render:(t,i)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:t}),e.jsx("div",{className:"text-gray-500 text-xs truncate max-w-xs",children:i.description})]})},{title:"分类",dataIndex:["category","name"],key:"category",render:t=>e.jsx(me,{color:"blue",children:t})},{title:"状态",key:"status",render:(t,i)=>e.jsxs(G,{direction:"vertical",size:"small",children:[e.jsxs(G,{children:[e.jsx("span",{className:"text-xs",children:"置顶:"}),e.jsx(T,{size:"small",checked:i.isFeatured,onChange:h=>le(i.id,"isFeatured",h)})]}),e.jsxs(G,{children:[e.jsx("span",{className:"text-xs",children:"可见:"}),e.jsx(T,{size:"small",checked:i.isVisible,onChange:h=>le(i.id,"isVisible",h)})]})]})},{title:"EXIF",key:"exif",render:(t,i)=>i.exifData?e.jsx(Be,{title:e.jsxs("div",{className:"text-xs",children:[e.jsxs("div",{children:["相机: ",i.exifData.cameraModel]}),e.jsxs("div",{children:["光圈: f/",i.exifData.aperture]}),e.jsxs("div",{children:["焦距: ",i.exifData.focalLength,"mm"]}),e.jsxs("div",{children:["ISO: ",i.exifData.iso]})]}),children:e.jsx(me,{children:"EXIF"})}):e.jsx("span",{className:"text-gray-400",children:"-"})},{title:"操作",key:"action",render:(t,i)=>e.jsxs(G,{size:"small",children:[e.jsx(S,{type:"text",icon:e.jsx(he,{}),onClick:()=>je(i)}),e.jsx(de,{title:"确定要删除吗？",onConfirm:()=>pe(i.id),okText:"是",cancelText:"否",children:e.jsx(S,{type:"text",danger:!0,icon:e.jsx(oe,{})})})]})}];return e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"摄影作品管理"}),e.jsx("p",{className:"text-gray-500",children:"管理您的摄影作品，包括上传、分类和排序"})]}),e.jsxs(G,{children:[e.jsx(S,{onClick:()=>P(!0),children:"分类管理"}),e.jsx(S,{type:"primary",icon:e.jsx(Se,{}),onClick:()=>j(!0),children:"上传作品"})]})]}),e.jsx(ce,{className:"mb-6",bodyStyle:{padding:"12px 16px"},children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 justify-between items-center",children:[e.jsx("div",{className:"w-full md:w-auto flex-1",children:e.jsx(O,{prefix:e.jsx(We,{className:"text-gray-400"}),placeholder:"搜索作品标题或描述...",value:s,onChange:t=>d(t.target.value),allowClear:!0,className:"w-full"})}),e.jsxs("div",{className:"w-full md:w-auto flex gap-2 overflow-x-auto pb-1 md:pb-0",children:[e.jsx(L,{style:{width:140,minWidth:140},placeholder:"全部分类",allowClear:!0,onChange:r,value:x,children:l.map(t=>e.jsxs(L.Option,{value:t.id,children:[t.name," (",t._count.photos,")"]},t.id))}),e.jsx(S,{icon:e.jsx(it,{}),onClick:Me,children:"导出"}),Z&&e.jsx(S,{icon:B==="grid"?e.jsx(st,{}):e.jsx(rt,{}),onClick:()=>te(B==="grid"?"table":"grid")})]})]})}),k.length>0&&e.jsxs("div",{className:"mb-4 bg-blue-50 p-3 rounded-lg flex justify-between items-center shadow-sm",children:[e.jsxs("span",{className:"text-blue-700 font-medium",children:["已选 ",k.length," 项"]}),e.jsxs(G,{children:[!Z&&e.jsx(S,{size:"small",onClick:()=>R(!0),children:"批量分类"}),e.jsx(S,{size:"small",danger:!0,onClick:ke,children:"批量删除"})]})]}),e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:X.length>0?B==="grid"?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4 p-4",children:X.map(t=>e.jsx(ce,{hoverable:!0,cover:e.jsxs("div",{className:"relative group h-48 overflow-hidden",children:[e.jsx("img",{alt:t.title,src:t.thumbnailUrl,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),e.jsxs("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center gap-2",children:[e.jsx(S,{type:"primary",shape:"circle",icon:e.jsx(he,{}),onClick:()=>je(t)}),e.jsx(de,{title:"删除",onConfirm:()=>pe(t.id),children:e.jsx(S,{type:"primary",danger:!0,shape:"circle",icon:e.jsx(oe,{})})})]}),t.isFeatured&&e.jsx(me,{color:"gold",className:"absolute top-2 right-2 m-0",children:"置顶"})]}),actions:[e.jsx(T,{size:"small",checked:t.isVisible,onChange:i=>le(t.id,"isVisible",i),checkedChildren:e.jsx(Ae,{}),unCheckedChildren:e.jsx(_e,{})}),e.jsx("span",{className:"text-xs text-gray-400",children:t.category.name})],children:e.jsx(ce.Meta,{title:e.jsx("div",{className:"truncate",children:t.title||"无标题"}),description:e.jsx("div",{className:"truncate text-xs",children:t.description||"暂无描述"})})},t.id))}):e.jsx(De,{collisionDetection:Le,onDragEnd:Fe,children:e.jsx(Te,{items:X.map(t=>t.id),strategy:Ve,children:e.jsx(nt,{components:{body:{row:pt}},columns:ze,dataSource:X,rowKey:"id",loading:p,rowSelection:{selectedRowKeys:k,onChange:A},pagination:{defaultPageSize:20,showSizeChanger:!0,showTotal:t=>`共 ${t} 条`,position:["bottomCenter"]},scroll:{x:800}})})}):e.jsx(at,{description:"暂无数据",className:"py-12"})}),e.jsx(J,{title:"上传摄影作品",open:f,onCancel:()=>j(!1),footer:[e.jsx(S,{onClick:()=>j(!1),children:"取消"},"cancel"),e.jsx(S,{type:"primary",loading:se,onClick:re,disabled:I.length===0,children:"开始上传"},"upload")],width:700,children:e.jsxs(g,{form:q,layout:"vertical",initialValues:{isFeatured:!1,isVisible:!0},children:[e.jsx(g.Item,{name:"title",label:"标题",children:e.jsx(O,{placeholder:"输入作品标题 (选填)"})}),e.jsx(g.Item,{name:"categoryId",label:"分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsx(L,{placeholder:"选择分类",children:l.map(t=>e.jsx(L.Option,{value:t.id,children:t.name},t.id))})}),e.jsx(g.Item,{name:"description",label:"描述",children:e.jsx(O.TextArea,{rows:3,placeholder:"输入作品描述 (选填)"})}),e.jsxs(be,{gutter:16,children:[e.jsx(ae,{span:12,children:e.jsx(g.Item,{name:"isFeatured",valuePropName:"checked",label:"置顶",children:e.jsx(T,{})})}),e.jsx(ae,{span:12,children:e.jsx(g.Item,{name:"isVisible",valuePropName:"checked",label:"可见",children:e.jsx(T,{})})})]}),e.jsx(g.Item,{label:"选择图片",children:e.jsxs(ue.Dragger,{...ne,children:[e.jsx("p",{className:"ant-upload-drag-icon",children:e.jsx(Se,{})}),e.jsx("p",{className:"ant-upload-text",children:"点击或拖拽文件到此区域上传"}),e.jsx("p",{className:"ant-upload-hint",children:"支持 JPG, PNG, WebP, GIF 格式"})]})})]})}),e.jsxs(J,{title:"分类管理",open:M,onCancel:()=>{P(!1),_(null),E.resetFields()},footer:null,width:600,children:[e.jsxs("div",{className:"mb-4 p-4 bg-gray-50 rounded",children:[e.jsx("h4",{className:"mb-2 font-medium",children:W?"编辑分类":"新建分类"}),e.jsxs(g,{form:E,layout:"inline",onFinish:ve,children:[e.jsx(g.Item,{name:"name",rules:[{required:!0,message:"请输入名称"}],children:e.jsx(O,{placeholder:"分类名称"})}),e.jsx(g.Item,{name:"slug",rules:[{required:!0,message:"请输入Slug"}],children:e.jsx(O,{placeholder:"Slug"})}),e.jsxs(g.Item,{children:[e.jsx(S,{type:"primary",htmlType:"submit",children:"保存"}),W&&e.jsx(S,{style:{marginLeft:8},onClick:()=>{_(null),E.resetFields()},children:"取消"})]})]})]}),e.jsx(ge,{itemLayout:"horizontal",dataSource:l,renderItem:t=>e.jsx(ge.Item,{actions:[e.jsx(S,{type:"text",icon:e.jsx(he,{}),onClick:()=>{_(t),E.setFieldsValue(t)},children:"编辑"}),e.jsx(de,{title:"确定删除？",onConfirm:()=>Ce(t.id),children:e.jsx(S,{type:"text",danger:!0,icon:e.jsx(oe,{}),children:"删除"})})],children:e.jsx(ge.Item.Meta,{title:t.name,description:`Slug: ${t.slug} | ${t._count.photos} 张照片`})})})]}),e.jsx(J,{title:"批量分类",open:Q,onOk:Ne,onCancel:()=>R(!1),children:e.jsx(g,{form:y,layout:"vertical",children:e.jsx(g.Item,{name:"categoryId",label:"选择新分类",rules:[{required:!0,message:"请选择分类"}],children:e.jsx(L,{placeholder:"选择分类",children:l.map(t=>e.jsx(L.Option,{value:t.id,children:t.name},t.id))})})})}),e.jsx(J,{title:"编辑作品",open:K,onOk:Ee,onCancel:()=>N(!1),children:e.jsxs(g,{form:H,layout:"vertical",children:[e.jsx(g.Item,{name:"title",label:"标题",children:e.jsx(O,{})}),e.jsx(g.Item,{name:"description",label:"描述",children:e.jsx(O.TextArea,{rows:4})}),e.jsx(g.Item,{name:"categoryId",label:"分类",children:e.jsx(L,{children:l.map(t=>e.jsx(L.Option,{value:t.id,children:t.name},t.id))})}),e.jsxs(be,{gutter:16,children:[e.jsx(ae,{span:12,children:e.jsx(g.Item,{name:"isFeatured",valuePropName:"checked",label:"置顶",children:e.jsx(T,{})})}),e.jsx(ae,{span:12,children:e.jsx(g.Item,{name:"isVisible",valuePropName:"checked",label:"可见",children:e.jsx(T,{})})})]})]})})]})};export{Et as default};
